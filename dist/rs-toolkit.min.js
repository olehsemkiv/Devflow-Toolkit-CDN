!function(){"use strict";var t;t||(t=1,function(){const t=window.RS=window.RS||{};t.version=t.version||"0.1.0",t.modules=t.modules||{},t.debug=function(...t){window.RS_DEBUG&&console.log("[RS]",...t)},t.emit=function(t,e={}){document.dispatchEvent(new CustomEvent(t,{detail:e}))},t.register=function(e,o){e&&"function"==typeof o&&(t.modules[e]=o,t.debug("registered:",e))},t.init=function(){t.debug("init start"),Object.entries(t.modules).forEach(([e,o])=>{try{o(),t.debug("init ok:",e)}catch(t){console.error("[RS] init failed:",e,t)}}),t.debug("init done")}}()),function(){if(!window.RS||!window.RS.register)return void console.warn("[RS] core is missing. Include rs-core.min.js first.");const t="[data-rs-modal]",e="[data-rs-modal-open]",o="[data-rs-modal-close]",n="[data-rs-modal-overlay], .modal_overlay",r="[data-rs-modal-content], .modal_content",s="is-open",i="is-modal-open",l=window.CSS&&CSS.escape||function(t){return String(t).replace(/["\\#.:?[\]()\s]/g,"\\$&")};let d=null,c=null;const u={locked:!1,scrollY:0,prev:{}};function a(t){return!!t&&(!!t.hasAttribute("data-rs-modal-lock")&&function(t){const e=String(t||"").toLowerCase().trim();return"true"===e||"1"===e||"yes"===e}(t.getAttribute("data-rs-modal-lock")))}function f(t){if(!t)return[];const e=(t.querySelector(r)||t).querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","[tabindex]:not([tabindex='-1'])"].join(","));return Array.from(e).filter(t=>null!==t.offsetParent)}function m(t,e="close"){if(!t)return;t.classList.remove(s),t.setAttribute("aria-hidden","true"),a(t)&&function(){if(!u.locked)return;const t=document.documentElement,e=document.body;e.style.position=u.prev.bodyPosition||"",e.style.top=u.prev.bodyTop||"",e.style.width=u.prev.bodyWidth||"",e.style.overflow=u.prev.bodyOverflow||"",t.style.overflow=u.prev.htmlOverflow||"",t.classList.remove(i),window.scrollTo(0,u.scrollY),u.locked=!1}();const o=t.getAttribute("data-rs-modal")||null;window.RS.emit("rs:modal:close",{id:o,modal:t,reason:e}),c&&"function"==typeof c.focus&&c.focus(),d===t&&(d=null),c=null}function y(t,e=null){if(!t)return;d&&d!==t&&m(d,"switch"),c=e||null,d=t,t.classList.add(s),t.setAttribute("aria-hidden","false"),t.setAttribute("tabindex","-1"),a(t)&&function(){if(u.locked)return;const t=document.documentElement,e=document.body;u.scrollY=window.scrollY||0,u.prev={htmlOverflow:t.style.overflow,bodyPosition:e.style.position,bodyTop:e.style.top,bodyWidth:e.style.width,bodyOverflow:e.style.overflow},e.style.position="fixed",e.style.top=`-${u.scrollY}px`,e.style.width="100%",e.style.overflow="hidden",t.classList.add(i),u.locked=!0}();const o=t.getAttribute("data-rs-modal")||null;window.RS.emit("rs:modal:open",{id:o,modal:t,trigger:e}),setTimeout(()=>function(t){const e=f(t);e.length?e[0].focus():t.focus?.()}(t),0)}function v(t){const e=t.getAttribute("data-rs-modal-open");if(e)return{type:"id",value:e};const o=t.getAttribute("data-rs-modal-target");return o?{type:"selector",value:o}:null}function w(e){return e?"id"===e.type?(o=e.value)?document.querySelector(`${t}[data-rs-modal="${l(o)}"]`):null:"selector"===e.type?document.querySelector(e.value):null:null;var o}window.RS.register("modal",function(){document.addEventListener("click",s=>{const i=s.target.closest(e);if(i){s.preventDefault();const t=w(v(i));return void(t&&y(t,i))}const l=s.target.closest(o);if(l){const e=l.closest(t);return void(e&&m(e,"button"))}const d=s.target.closest(n);if(d){const e=d.closest(t);if(!e)return;const o=e.querySelector(r);if(o&&o.contains(s.target))return;m(e,"overlay")}}),document.addEventListener("focusin",t=>{const o=t.target;if(!o||!o.matches?.(e))return;if(!function(t){const e=(t.tagName||"").toLowerCase();return"input"===e||"textarea"===e||"select"===e}(o))return;const n=w(v(o));n&&y(n,o)}),document.addEventListener("keydown",t=>{if(d)return"Escape"===t.key?(t.preventDefault(),void m(d,"escape")):void function(t,e){if("Tab"!==t.key)return;const o=f(e);if(!o.length)return;const n=o[0],r=o[o.length-1],s=document.activeElement;t.shiftKey?s!==n&&s!==e||(t.preventDefault(),r.focus()):s===r&&(t.preventDefault(),n.focus())}(t,d)})})}()}();
//# sourceMappingURL=rs-toolkit.min.js.map
