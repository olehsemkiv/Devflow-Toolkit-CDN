!function(){"use strict";!function(){if(!window.RS||!window.RS.register)return void console.warn("[RS] core is missing. Include rs-core.min.js first.");const t="[data-rs-modal]",e="[data-rs-modal-open]",o="[data-rs-modal-close]",n="[data-rs-modal-overlay]",r="[data-rs-modal-content]",l="is-open",s="is-modal-open",i=window.CSS&&CSS.escape||function(t){return String(t).replace(/["\\#.:?[\]()\s]/g,"\\$&")};let c=null,d=null;const u={locked:!1,scrollY:0,prev:{}};function a(t){return!!t&&(!!t.hasAttribute("data-rs-modal-lock")&&function(t){const e=String(t||"").toLowerCase().trim();return"true"===e||"1"===e||"yes"===e}(t.getAttribute("data-rs-modal-lock")))}function f(t){if(!t)return[];const e=(t.querySelector(r)||t).querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","[tabindex]:not([tabindex='-1'])"].join(","));return Array.from(e).filter(t=>null!==t.offsetParent)}function m(t,e="close"){if(!t)return;t.classList.remove(l),t.setAttribute("aria-hidden","true"),a(t)&&function(){if(!u.locked)return;const t=document.documentElement,e=document.body;e.style.position=u.prev.bodyPosition||"",e.style.top=u.prev.bodyTop||"",e.style.width=u.prev.bodyWidth||"",e.style.overflow=u.prev.bodyOverflow||"",t.style.overflow=u.prev.htmlOverflow||"",t.classList.remove(s),window.scrollTo(0,u.scrollY),u.locked=!1}();const o=t.getAttribute("data-rs-modal")||null;window.RS.emit("rs:modal:close",{id:o,modal:t,reason:e}),d&&"function"==typeof d.focus&&d.focus(),c===t&&(c=null),d=null}function y(t,e=null){if(!t)return;c&&c!==t&&m(c,"switch"),d=e||null,c=t,t.classList.add(l),t.setAttribute("aria-hidden","false"),t.setAttribute("tabindex","-1"),a(t)&&function(){if(u.locked)return;const t=document.documentElement,e=document.body;u.scrollY=window.scrollY||0,u.prev={htmlOverflow:t.style.overflow,bodyPosition:e.style.position,bodyTop:e.style.top,bodyWidth:e.style.width,bodyOverflow:e.style.overflow},e.style.position="fixed",e.style.top=`-${u.scrollY}px`,e.style.width="100%",e.style.overflow="hidden",t.classList.add(s),u.locked=!0}();const o=t.getAttribute("data-rs-modal")||null;window.RS.emit("rs:modal:open",{id:o,modal:t,trigger:e}),setTimeout(()=>function(t){const e=f(t);e.length?e[0].focus():t.focus?.()}(t),0)}function v(t){const e=t.getAttribute("data-rs-modal-open");if(e)return{type:"id",value:e};const o=t.getAttribute("data-rs-modal-target");return o?{type:"selector",value:o}:null}function p(e){return e?"id"===e.type?(o=e.value)?document.querySelector(`${t}[data-rs-modal="${i(o)}"]`):null:"selector"===e.type?document.querySelector(e.value):null:null;var o}window.RS.register("modal",function(){document.addEventListener("click",l=>{const s=l.target.closest(e);if(s){l.preventDefault();const t=p(v(s));return void(t&&y(t,s))}const i=l.target.closest(o);if(i){const e=i.closest(t);return void(e&&m(e,"button"))}const c=l.target.closest(n);if(c){const e=c.closest(t);if(!e)return;const o=e.querySelector(r);if(o&&o.contains(l.target))return;m(e,"overlay")}}),document.addEventListener("focusin",t=>{const o=t.target;if(!o||!o.matches?.(e))return;if(!function(t){const e=(t.tagName||"").toLowerCase();return"input"===e||"textarea"===e||"select"===e}(o))return;const n=p(v(o));n&&y(n,o)}),document.addEventListener("keydown",t=>{if(c)return"Escape"===t.key?(t.preventDefault(),void m(c,"escape")):void function(t,e){if("Tab"!==t.key)return;const o=f(e);if(!o.length)return;const n=o[0],r=o[o.length-1],l=document.activeElement;t.shiftKey?l!==n&&l!==e||(t.preventDefault(),r.focus()):l===r&&(t.preventDefault(),n.focus())}(t,c)})})}()}();
//# sourceMappingURL=rs-modal.min.js.map
